(this.webpackJsonpcli=this.webpackJsonpcli||[]).push([[5,6],{115:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return I}));var a=n(13),s=n(14),i=n(16),r=n(15),o=n(0),c=n.n(o),u=n(116),l=n(2),d=n(7),f=n(36),j=n.n(f),b=n(37),h=["bsPrefix","className","noGutters","as"],O=["xl","lg","md","sm","xs"],v=c.a.forwardRef((function(t,e){var n=t.bsPrefix,a=t.className,s=t.noGutters,i=t.as,r=void 0===i?"div":i,o=Object(d.a)(t,h),u=Object(b.a)(n,"row"),f=u+"-cols",v=[];return O.forEach((function(t){var e,n=o[t];delete o[t];var a="xs"!==t?"-"+t:"";null!=(e=null!=n&&"object"===typeof n?n.cols:n)&&v.push(""+f+a+"-"+e)})),c.a.createElement(r,Object(l.a)({ref:e},o,{className:j.a.apply(void 0,[a,u,s&&"no-gutters"].concat(v))}))}));v.displayName="Row",v.defaultProps={noGutters:!1};var m=v,p=n(108),x=n(1),g=n(40),w=n(41),k=n(77),y=n(3),I=function(t){Object(i.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).state={quote:{comments:[]},isLoggedIn:!0,isOffline:!1},s}return Object(s.a)(n,[{key:"loadQuote",value:function(){var t=this,e=this.props.match.params.postId;Object(g.a)("api/post/"+e,"get",{}).then((function(e){if(console.log(e),"error"!==e.status){"login"===e.status&&t.setLogginState(!1);var n=e.data;n&&t.setQuoteState(n),t.setState({isOffline:!1}),console.log("QUOTE",n)}else t.setState({isOffline:!0})})).catch((function(t){return console.log(t)}))}},{key:"componentDidMount",value:function(){var t=this;this.loadQuote(),new BroadcastChannel("sync-channel").onmessage=function(e){console.log(e),e.data.finished&&t.loadQuote()}}},{key:"render",value:function(){if(!1===this.state.isLoggedIn)return Object(y.jsx)(x.a,{to:"/signin"});if(this.state.isOffline)return Object(y.jsx)(k.default,{});var t=Object(y.jsxs)(u.a,{children:[Object(y.jsx)(u.a.Body,{children:Object(y.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(y.jsxs)("p",{children:[" ",this.state.quote.body," "]}),Object(y.jsxs)("footer",{className:"blockquote-footer",children:["Someone famous in ",Object(y.jsx)("cite",{title:"Source Title",children:this.state.quote.author})]})]})}),Object(y.jsxs)(u.a.Footer,{children:[0===this.state.quote.comments.length&&Object(y.jsx)("br",{}),this.state.quote.comments.map((function(t){return Object(y.jsx)("div",{children:Object(y.jsx)(u.a.Text,{children:Object(y.jsx)(m,{children:Object(y.jsxs)("p",{children:["Comment ",t.text]})})},t.id)})}))]})]});return Object(y.jsx)(w.a,{isLoggedIn:this.state.isLoggedIn,showBackButton:!0,children:Object(y.jsxs)(p.a,{children:[Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),t]})})}},{key:"setLogginState",value:function(t){var e=Object.assign(this.state,{isLoggedIn:t});this.setState(e)}},{key:"setQuoteState",value:function(t){this.setState(Object.assign(this.state,{quote:t}))}},{key:"setCommentsState",value:function(t){this.setState(Object.assign(this.state,{comments:t}))}}]),n}(c.a.Component)},40:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return j}));var a=n(45),s=n.n(a),i=n(46),r=n(47),o=n.n(r);function c(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"allowed";return new Promise((function(r){var c={method:e,url:"https://service-forum.herokuapp.com/"+t,data:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:d(a)}};o()(c).then((function(t){return u(t,r)})).catch(function(){var t=Object(i.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.response||401!==e.response.status){t.next=4;break}return n={status:"login",data:null},console.log(n),t.abrupt("return",r(n));case 4:r({status:"error",data:e});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}function u(t,e){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(s.a.mark((function t(e,n){var a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),!(e.status<200||e.status>=300)){t.next=4;break}return a={status:"error",data:e.data},t.abrupt("return",n(a));case 4:return i={status:"ok",data:e.data},t.abrupt("return",n(i));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return"Bearer "+localStorage.getItem("token_"+t)}function f(t){return!!localStorage.getItem("token_"+t)}function j(t,e){localStorage.setItem("token_"+t,e)}},41:function(t,e,n){"use strict";var a=n(53),s=n(0),i=n.n(s),r=(n(48),n(49),n(50),n(113)),o=n(13),c=n(14),u=n(16),l=n(15),d=n(112),f=n(108),j=n(111),b=n(17),h=(n(42),n(3)),O=function t(e,n){Object(o.a)(this,t),this.text="",this.link="",this.text=e,this.link=n},v=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={items:[]},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)(d.a,{bg:"light",variant:"light",fixed:"top",children:Object(h.jsxs)(f.a,{children:[Object(h.jsx)(d.a.Brand,{children:"QR"}),Object(h.jsx)(j.a,{className:"mr-auto",children:Object(h.jsx)(b.a,{children:this.props.items.map((function(t){return Object(h.jsx)(b.b,{to:t.link,children:t.text})}))})})]})})})}}]),n}(i.a.Component),m=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={role:""},a}return Object(c.a)(n,[{key:"render",value:function(){var t=[];switch(this.props.role){case"visitor":t=this.visitorMenuItems();break;case"allowed":t=this.userMenuItems()}return Object(h.jsx)(v,{items:t})}},{key:"visitorMenuItems",value:function(){return[new O("Home","/"),new O("Sign In","/signin")]}},{key:"userMenuItems",value:function(){return[new O("Quotes","/quotes")]}}]),n}(i.a.Component),p={position:"fixed",left:0,bottom:0,width:"100%",zIndex:9999,margin:0,textAlign:"center"};e.a=function(t){var e=Object(s.useState)(!1),n=Object(a.a)(e,2),i=n[0],o=n[1];Object(s.useEffect)((function(){var t=function(){window.isOffline=!1,o(!1)},e=function(){window.isOffline=!0,o(!0)};return window.addEventListener("online",t),window.addEventListener("offline",e),function(){window.removeEventListener("online",t),window.removeEventListener("offline",e)}})),Object(s.useEffect)((function(){window.isOffline&&o(!0)}),[]);var c,u,l=(c=t.isLoggedIn,u=t.showBackButton,Object(h.jsx)(m,{role:c?"allowed":"visitor",showBackButton:u}));return Object(h.jsxs)("div",{children:[l,i?Object(h.jsx)(r.a,{variant:"warning",style:p,children:"Offline mode"}):null,Object(h.jsx)("br",{}),t.children]})}},42:function(t,e,n){},58:function(t,e,n){},76:function(t,e,n){"use strict";var a=n(2),s=n(7),i=n(36),r=n.n(i),o=n(0),c=n.n(o),u=n(37),l=n(44),d=["bsPrefix","variant","size","active","className","block","type","as"],f=c.a.forwardRef((function(t,e){var n=t.bsPrefix,i=t.variant,o=t.size,f=t.active,j=t.className,b=t.block,h=t.type,O=t.as,v=Object(s.a)(t,d),m=Object(u.a)(n,"btn"),p=r()(j,m,f&&"active",i&&m+"-"+i,b&&m+"-block",o&&m+"-"+o);if(v.href)return c.a.createElement(l.a,Object(a.a)({},v,{as:O,ref:e,className:r()(p,v.disabled&&"disabled")}));e&&(v.ref=e),h?v.type=h:O||(v.type="button");var x=O||"button";return c.a.createElement(x,Object(a.a)({},v,{className:p}))}));f.displayName="Button",f.defaultProps={variant:"primary",active:!1,disabled:!1},e.a=f},77:function(t,e,n){"use strict";n.r(e);var a=n(13),s=n(14),i=n(16),r=n(15),o=n(0),c=n(116),u=n(76),l=(n(58),n(40)),d=n(41),f=n(3),j=function(t){Object(i.a)(n,t);var e=Object(r.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).onReloadClickHandler=function(){window.isOffline||window.location.reload()},s.state={isLoggedIn:Object(l.c)("allowed")},s}return Object(s.a)(n,[{key:"render",value:function(){return Object(f.jsx)(d.a,{isLoggedIn:this.state.isLoggedIn,children:Object(f.jsx)("div",{className:"fallback",children:Object(f.jsx)(c.a,{children:Object(f.jsxs)(c.a.Body,{children:[Object(f.jsx)("h1",{children:"No Internet Connection"}),Object(f.jsx)(u.a,{variant:"primary",onClick:this.onReloadClickHandler,children:"Reload"})]})})})})}}]),n}(o.Component);e.default=j}}]);
//# sourceMappingURL=5.d492eae0.chunk.js.map