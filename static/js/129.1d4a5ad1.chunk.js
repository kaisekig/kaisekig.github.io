"use strict";(self.webpackChunkcli=self.webpackChunkcli||[]).push([[129],{6713:function(t,n,e){e.d(n,{Fr:function(){return h},ZP:function(){return a},gy:function(){return f},kD:function(){return d}});var r=e(4165),s=e(5861),i=e(4569),o=e.n(i);function a(t,n,e){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"allowed";return new Promise((function(a){var c={method:n,url:"https://service-forum.herokuapp.com/"+t,data:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:l(i)}};o()(c).then((function(t){return u(t,a)})).catch(function(){var t=(0,s.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.response||401!==n.response.status){t.next=4;break}return e={status:"login",data:null},console.log(e),t.abrupt("return",a(e));case 4:a({status:"error",data:n});case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())}))}function u(t,n){return c.apply(this,arguments)}function c(){return(c=(0,s.Z)((0,r.Z)().mark((function t(n,e){var s,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),!(n.status<200||n.status>=300)){t.next=4;break}return s={status:"error",data:n.data},t.abrupt("return",e(s));case 4:return i={status:"ok",data:n.data},t.abrupt("return",e(i));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return"Bearer "+localStorage.getItem("token_"+t)}function d(t){return!!localStorage.getItem("token_"+t)}function h(t,n){localStorage.setItem("token_"+t,n)}function f(t){localStorage.removeItem("token_"+t)}},6129:function(t,n,e){e.r(n),e.d(n,{default:function(){return m}});var r=e(4942),s=e(5671),i=e(3144),o=e(136),a=e(8557),u=e(2791),c=e(2677),l=e(8695),d=e(6149),h=e(3360),f=e(9271),p=e(6713),g=e(3847),v=e(184),m=function(t){(0,o.Z)(e,t);var n=(0,a.Z)(e);function e(t){var r;return(0,s.Z)(this,e),(r=n.call(this,t)).state={username:"",password:"",isLoggedIn:!1},r}return(0,i.Z)(e,[{key:"formInputChange",value:function(t){var n=Object.assign(this.state,(0,r.Z)({},t.target.id,t.target.value));this.setState(n)}},{key:"setLoginState",value:function(t){var n=Object.assign(this.state,{isLoggedIn:t});this.setState(n)}},{key:"doLogin",value:function(){var t=this;(0,p.ZP)("auth/signin","post",{username:this.state.username,password:this.state.password}).then((function(n){"error"!==n.status?"ok"===n.status&&((0,p.Fr)("allowed",n.data.token),t.setLoginState(!0)):console.log(n.data)}))}},{key:"render",value:function(){var t=this;return!0===this.state.isLoggedIn?(0,v.jsx)(f.l_,{to:"/quotes"}):(0,v.jsx)(g.Z,{isLoggedIn:this.state.isLoggedIn,children:(0,v.jsxs)("div",{className:"signin-page",children:[(0,v.jsx)("br",{}),(0,v.jsx)(c.Z,{md:{span:6,offset:3},children:(0,v.jsxs)(l.Z.Body,{children:[(0,v.jsxs)(l.Z.Title,{children:[(0,v.jsx)("p",{children:"Sign in here!"}),(0,v.jsx)("span",{role:"img","aria-label":"pointing_down",children:" \ud83d\udc47 "})]}),(0,v.jsx)(l.Z.Text,{children:(0,v.jsxs)(d.Z,{children:[(0,v.jsxs)(d.Z.Group,{as:c.Z,children:[(0,v.jsx)(d.Z.Label,{htmlFor:"username",children:" Username: "}),(0,v.jsx)(d.Z.Control,{type:"text",id:"username",value:this.state.username,onChange:function(n){return t.formInputChange(n)}})]}),(0,v.jsxs)(d.Z.Group,{as:c.Z,children:[(0,v.jsx)(d.Z.Label,{htmlFor:"password",children:" Password: "}),(0,v.jsx)(d.Z.Control,{type:"password",id:"password",value:this.state.password,onChange:function(n){return t.formInputChange(n)}})]}),(0,v.jsx)(d.Z.Group,{children:(0,v.jsx)(h.Z,{variant:"dark",size:"sm",onClick:function(){return t.doLogin()},children:" Jump in"})})]})})]})})]})})}}]),e}(u.Component)},3847:function(t,n,e){e.d(n,{Z:function(){return w}});var r=e(8152),s=e(2791),i=(e(7632),e(613),e(6144),e(5427)),o=e(5671),a=e(3144),u=e(136),c=e(8557),l=e(9005),d=e(7022),h=e(4034),f=e(1523),p=e(184),g=(0,a.Z)((function t(n,e){(0,o.Z)(this,t),this.text="",this.link="",this.text=n,this.link=e})),v=function(t){(0,u.Z)(e,t);var n=(0,c.Z)(e);function e(t){var r;return(0,o.Z)(this,e),(r=n.call(this,t)).state={items:[]},r}return(0,a.Z)(e,[{key:"render",value:function(){return(0,p.jsx)("div",{children:(0,p.jsx)(l.Z,{bg:"light",variant:"light",fixed:"top",children:(0,p.jsxs)(d.Z,{children:[(0,p.jsx)(l.Z.Brand,{children:"QR"}),(0,p.jsx)(h.Z,{className:"mr-auto",children:(0,p.jsx)(f.UT,{children:this.props.items.map((function(t){return(0,p.jsx)(f.rU,{to:t.link,children:t.text})}))})})]})})})}}]),e}(s.Component),m=function(t){(0,u.Z)(e,t);var n=(0,c.Z)(e);function e(t){var r;return(0,o.Z)(this,e),(r=n.call(this,t)).state={role:""},r}return(0,a.Z)(e,[{key:"render",value:function(){var t=[];switch(this.props.role){case"visitor":t=this.visitorMenuItems();break;case"allowed":t=this.userMenuItems()}return(0,p.jsx)(v,{items:t})}},{key:"visitorMenuItems",value:function(){return[new g("Home","/"),new g("Sign In","/signin"),new g("Register","/register")]}},{key:"userMenuItems",value:function(){return[new g("Quotes","/quotes"),new g("Sign Out","/signout")]}}]),e}(s.Component),Z={position:"fixed",left:0,bottom:0,width:"100%",zIndex:9999,margin:0,textAlign:"center"},w=function(t){var n=(0,s.useState)(!1),e=(0,r.Z)(n,2),o=e[0],a=e[1];(0,s.useEffect)((function(){var t=function(){window.isOffline=!1,a(!1)},n=function(){window.isOffline=!0,a(!0)};return window.addEventListener("online",t),window.addEventListener("offline",n),function(){window.removeEventListener("online",t),window.removeEventListener("offline",n)}})),(0,s.useEffect)((function(){window.isOffline&&a(!0)}),[]);var u,c,l=(u=t.isLoggedIn,c=t.showBackButton,(0,p.jsx)(m,{role:u?"allowed":"visitor",showBackButton:c}));return(0,p.jsxs)("div",{children:[l,o?(0,p.jsx)(i.Z,{variant:"warning",style:Z,children:"Offline mode"}):null,(0,p.jsx)("br",{}),t.children]})}}}]);
//# sourceMappingURL=129.1d4a5ad1.chunk.js.map